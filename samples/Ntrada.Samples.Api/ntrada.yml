auth:
  enabled: true
  global: false
  claims:
    role: http://schemas.microsoft.com/ws/2008/06/identity/claims/role

http:
  retries: 2
  interval: 2.0
  exponential: true

use_error_handler: true
use_jaeger: true
use_forwarded_headers: true
pass_query_string: true
modules_path: Modules
payloads_folder: Payloads
forward_request_headers: true
forward_response_headers: true
generate_request_id: true
generate_trace_id: true
use_local_url: true
load_balancer:
  enabled: false
  url: localhost:9999

extensions:
  customErrors:
    includeExceptionMessage: true
  
  cors:
    allowCredentials: true
    allowedOrigins:
      - '*'
    allowedMethods:
      - post
      - delete
    allowedHeaders:
      - '*'
    exposedHeaders:
      - Request-ID
      - Resource-ID
      - Trace-ID
      - Total-Count
    
  jwt:
    key: eiquief5phee9pazo0Faegaez9gohThailiur5woy2befiech1oarai4aiLi6ahVecah3ie9Aiz6Peij
    issuer: ntrada
    issuers:
    validate_issuer: true
    audience:
    audiences:
    validate_audience: false
    validate_lifetime: true
    
  rabbitmq:
    enabled: true
    hostname: localhost
    port: 5672
    virtualHost: "/"
    username: guest
    password: guest
    requestedConnectionTimeout: 3000
    socketReadTimeout: 3000
    socketWriteTimeout: 3000
    requestedHeartbeat: 60
    exchange:
      declareExchange: true
      durable: true
      autoDelete: false
      type: "topic"

  tracing:
    serviceName: ntrada
    udpHost: localhost
    udpPort: 6831
    maxPacketSize: 0
    sampler: const
    useEmptyTracer: false

modules:
  home:
    routes:
      - upstream: /
        method: GET
        use: return_value
        returnValue: Welcome to Ntrada API!
        
      - upstream: /
        method: POST
        auth: false
        use: rabbitmq
        config:
          exchange: sample.exchange
          routing_key: sample.routing.key
          type: "topic"

